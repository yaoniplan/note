- #### Use "cloudpaste"
    - Deploy backend
      ```
      git clone https://github.com/ling-drag0n/CloudPaste
      cd CloudPaste/backend && bun install # Install dependencies
      wrangler d1 create clodupaste-db # Create a database
      ```
        - `vim wrangler.toml`
          ```
          [[d1_databases]]
          binding = "DB"
          database_name = "cloudpaste-db"
          database_id = "copyAndPasteYourDatabaseIdHere"
          ```
        - `wrangler deploy` # Deploy backend
    - Deploy frontend
      ```
      cd CloudPaste/frontend && bun install
      ```
        - `vim .env.production` # Replace with your real backend URL
          ```
          VITE_BACKEND_URL=https://cloudpaste-backend.xxx.workers.dev
          VITE_APP_ENV=production
          VITE_ENABLE_DEVTOOLS=false
          ```
        - `bun run build` # Build frontend
        - `sed -i "s|__BACKEND_URL__|https://your.backend.url|g" dist/config.js` # Update backend url
        - `wrangler pages deploy dist --project-name=cloudpaste-frontend` # Deploy it
    - Enable file sharing
        - Create a R2 bucket
        - Create an API token (Save: Acess Key ID, Secret Access Key, and Endpoint)
        - Configure CORS policy
        - https://github.com/ling-drag0n/CloudPaste#r2-api-retrieval-and-cross-origin-configuration
        - Add S3 storeage configuration in frontend (Fill in values just saved)
        - Add a mount point in frontend (Then you can see the mount point you just added in Mount Explorer)
- ***Notes***
    - Upload text
      ```
      curl --request POST 'https://your.backend.url/api/paste' \
        --header 'Content-Type: application/json' \
        --header 'Authorization: ApiKey yourApiKey' \
        --data '{
            "content": "This is a secret message",
            "remark": "",
            "slug": "",
            "password": "",
            "expires_at": "2025-04-26T01:01:33+08:00",
            "max_views": 0
          }'
      ```
    - Upload file
      ```
      curl --request PUT "https://your.backend.url/api/upload-direct/6901234567890.png?expires_in=24" \
        --header "Authorization: ApiKey yourApiKey" \
        --header "Content-Type: image/png" \
        --data-binary @/home/yaoniplan/6901234567890.png
      ```
        - `&path=/cloudpaste-backup/` # Set subpath
        - `&s3_config_id=9325ee6a-1452-4ca2-85bc-807216d82e30` # Specify the corresponding storage bucket
        - `&original_filename=true` # Use original filename without the random ID as prefix
        - Method two
          ```
          curl --request POST "https://your.backend.url/api/admin/fs/upload" \
            --header "Authorization: Bearer yourToken" \
            --form "file=@/home/yourUserName/test8.md" \
            --form "path=/cloudpaste-backup/"
          ```
        - Method three
          ```
          curl --user "yourUserName:yourPassword" --upload-file "/home/yaoniplan/test105.md" "https://your.backend.url/dav/cloudpaste-backup/test105.md"
          ```
    - Get token
      ```
      curl --request POST "https://your.backend.url/api/admin/login" \
          --header "Content-Type: application/json" \
          --data "{
              "username": "$USERNAME",
              "password": "$PASSWORD"
          }"
      ```
    - <details><summary>cloudpaste-old</summary>
      <p>

      - #### Use "cloudpaste-old"
          - Create two KV Namespaces
              - `PASTE_STORE`
              - `UPLOAD_STATUS`
          - Create a R2 Bucket
              - `cloudpaste-files`
          - Create a Worker
              - Variables and Secrets
                | Type      | Name           | Value              |
                | ---       | ---            | ---                |
                | Plaintext | ADMIN_PASSWORD | your-password-here |
                | Plaintext | ADMIN_USERNAME | your-username-here |
              - Bindings
                | Type         | Name          | Value            |
                | ---          | ---           | ---              |
                | R2 bucket    | FILE_STORE    | cloudpaste-files |
                | KV namespace | PASTE_STORE   | PASTE_STORE      |
                | KV namespace | UPLOAD_STATUS | UPLOAD_STATUS    |
              - Copy and paste [worker.js](https://raw.githubusercontent.com/ling-drag0n/CloudPaste-old/refs/heads/main/worker.js) to Worker
       - ***Notes***
          - Upload text
            ```
            curl --request POST 'https://cloudpaste.yaoniplan.eu.org/api/paste' \
              --header 'Content-Type: application/json' \
              --header 'Authorization: Basic Encode-username:password-with-base64' \
              --data '{
                "content": "This is a secret message",
                "password": "",
                "expiresIn": "1h",
                "isMarkdown": true,
                "customId": "",
                "maxViews": 0,
                "note": ""
              }'
            ```
          - Upload file
            ```
            curl --request POST 'https://cloudpaste.yaoniplan.eu.org/api/file' \
              --header 'Authorization: Basic Encode-username:password-with-base64' \
              --form 'files=@/home/yaoniplan/Downloads/CloudPaste/worker.js' \
              --form 'expiresIn=1d' \
              --form 'maxViews=0'
            ```
          - Get text content
            ```
            curl --request GET https://cloudpaste.yaoniplan.eu.org/api/paste/iYyHIDXr
            ```
          - Because to share information temporarily and stably.
      - ***References***
          - https://github.com/ling-drag0n/CloudPaste-old # `/manual` `/api endpoint`
          - Artificial intelligence

      </p>
      </details>
- ***References***
    - https://github.com/ling-drag0n/CloudPaste/blob/main/Api-s3_direct.md#授权方式
    - https://github.com/ling-drag0n/CloudPaste/blob/main/Api-doc.md#创建和访问文本分享
- ---
